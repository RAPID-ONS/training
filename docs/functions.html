<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>RAPID training: Functions in R</title>




  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="RAPID training: Functions in R"/>
  <meta property="og:type" content="article"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:site_name" content="RAPID training"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="RAPID training: Functions in R"/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","output"]}},"value":[{"type":"character","attributes":{},"value":["Functions in R"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","toc_depth","number_sections"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[2]},{"type":"logical","attributes":{},"value":[true]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  <!--radix_placeholder_navigation_in_header-->
  <meta name="distill:offset" content=""/>

  <script type="application/javascript">

    window.headroom_prevent_pin = false;

    window.document.addEventListener("DOMContentLoaded", function (event) {

      // initialize headroom for banner
      var header = $('header').get(0);
      var headerHeight = header.offsetHeight;
      var headroom = new Headroom(header, {
        tolerance: 5,
        onPin : function() {
          if (window.headroom_prevent_pin) {
            window.headroom_prevent_pin = false;
            headroom.unpin();
          }
        }
      });
      headroom.init();
      if(window.location.hash)
        headroom.unpin();
      $(header).addClass('headroom--transition');

      // offset scroll location for banner on hash change
      // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
      window.addEventListener("hashchange", function(event) {
        window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
      });

      // responsive menu
      $('.distill-site-header').each(function(i, val) {
        var topnav = $(this);
        var toggle = topnav.find('.nav-toggle');
        toggle.on('click', function() {
          topnav.toggleClass('responsive');
        });
      });

      // nav dropdowns
      $('.nav-dropbtn').click(function(e) {
        $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
        $(this).parent().siblings('.nav-dropdown')
           .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $("body").click(function(e){
        $('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $(".nav-dropdown").click(function(e){
        e.stopPropagation();
      });
    });
  </script>

  <style type="text/css">

  /* Theme (user-documented overrideables for nav appearance) */

  .distill-site-nav {
    color: rgba(255, 255, 255, 0.8);
    background-color: #0F2E3D;
    font-size: 15px;
    font-weight: 300;
  }

  .distill-site-nav a {
    color: inherit;
    text-decoration: none;
  }

  .distill-site-nav a:hover {
    color: white;
  }

  @media print {
    .distill-site-nav {
      display: none;
    }
  }

  .distill-site-header {

  }

  .distill-site-footer {

  }


  /* Site Header */

  .distill-site-header {
    width: 100%;
    box-sizing: border-box;
    z-index: 3;
  }

  .distill-site-header .nav-left {
    display: inline-block;
    margin-left: 8px;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header .nav-left {
      margin-left: 0;
    }
  }


  .distill-site-header .nav-right {
    float: right;
    margin-right: 8px;
  }

  .distill-site-header a,
  .distill-site-header .title {
    display: inline-block;
    text-align: center;
    padding: 14px 10px 14px 10px;
  }

  .distill-site-header .title {
    font-size: 18px;
    min-width: 150px;
  }

  .distill-site-header .logo {
    padding: 0;
  }

  .distill-site-header .logo img {
    display: none;
    max-height: 20px;
    width: auto;
    margin-bottom: -4px;
  }

  .distill-site-header .nav-image img {
    max-height: 18px;
    width: auto;
    display: inline-block;
    margin-bottom: -3px;
  }



  @media screen and (min-width: 1000px) {
    .distill-site-header .logo img {
      display: inline-block;
    }
    .distill-site-header .nav-left {
      margin-left: 20px;
    }
    .distill-site-header .nav-right {
      margin-right: 20px;
    }
    .distill-site-header .title {
      padding-left: 12px;
    }
  }


  .distill-site-header .nav-toggle {
    display: none;
  }

  .nav-dropdown {
    display: inline-block;
    position: relative;
  }

  .nav-dropdown .nav-dropbtn {
    border: none;
    outline: none;
    color: rgba(255, 255, 255, 0.8);
    padding: 16px 10px;
    background-color: transparent;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    margin: 0;
    margin-top: 1px;
    z-index: 2;
  }

  .nav-dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 200px;
    border: 1px solid rgba(0,0,0,0.15);
    border-radius: 4px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
    z-index: 1;
    margin-top: 2px;
    white-space: nowrap;
    padding-top: 4px;
    padding-bottom: 4px;
  }

  .nav-dropdown-content hr {
    margin-top: 4px;
    margin-bottom: 4px;
    border: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .nav-dropdown-active {
    display: block;
  }

  .nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
    color: black;
    padding: 6px 24px;
    text-decoration: none;
    display: block;
    text-align: left;
  }

  .nav-dropdown-content .nav-dropdown-header {
    display: block;
    padding: 5px 24px;
    padding-bottom: 0;
    text-transform: uppercase;
    font-size: 14px;
    color: #999999;
    white-space: nowrap;
  }

  .nav-dropdown:hover .nav-dropbtn {
    color: white;
  }

  .nav-dropdown-content a:hover {
    background-color: #ddd;
    color: black;
  }

  .nav-right .nav-dropdown-content {
    margin-left: -45%;
    right: 0;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
    .distill-site-header a.nav-toggle {
      float: right;
      display: block;
    }
    .distill-site-header .title {
      margin-left: 0;
    }
    .distill-site-header .nav-right {
      margin-right: 0;
    }
    .distill-site-header {
      overflow: hidden;
    }
    .nav-right .nav-dropdown-content {
      margin-left: 0;
    }
  }


  @media screen and (max-width: 768px) {
    .distill-site-header.responsive {position: relative; min-height: 500px; }
    .distill-site-header.responsive a.nav-toggle {
      position: absolute;
      right: 0;
      top: 0;
    }
    .distill-site-header.responsive a,
    .distill-site-header.responsive .nav-dropdown {
      display: block;
      text-align: left;
    }
    .distill-site-header.responsive .nav-left,
    .distill-site-header.responsive .nav-right {
      width: 100%;
    }
    .distill-site-header.responsive .nav-dropdown {float: none;}
    .distill-site-header.responsive .nav-dropdown-content {position: relative;}
    .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
      display: block;
      width: 100%;
      text-align: left;
    }
  }

  /* Site Footer */

  .distill-site-footer {
    width: 100%;
    overflow: hidden;
    box-sizing: border-box;
    z-index: 3;
    margin-top: 30px;
    padding-top: 30px;
    padding-bottom: 30px;
    text-align: center;
  }

  /* Headroom */

  d-title {
    padding-top: 6rem;
  }

  @media print {
    d-title {
      padding-top: 4rem;
    }
  }

  .headroom {
    z-index: 1000;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
  }

  .headroom--transition {
    transition: all .4s ease-in-out;
  }

  .headroom--unpinned {
    top: -100px;
  }

  .headroom--pinned {
    top: 0;
  }

  /* adjust viewport for navbar height */
  /* helps vertically center bootstrap (non-distill) content */
  .min-vh-100 {
    min-height: calc(100vh - 100px) !important;
  }

  </style>

  <script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
  <link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
  <script src="site_libs/headroom-0.9.4/headroom.min.js"></script>
  <script src="site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
  <script src="site_libs/fuse-6.4.1/fuse.min.js"></script>

  <script type="application/javascript">

  function getMeta(metaName) {
    var metas = document.getElementsByTagName('meta');
    for (let i = 0; i < metas.length; i++) {
      if (metas[i].getAttribute('name') === metaName) {
        return metas[i].getAttribute('content');
      }
    }
    return '';
  }

  function offsetURL(url) {
    var offset = getMeta('distill:offset');
    return offset ? offset + '/' + url : url;
  }

  function createFuseIndex() {

    // create fuse index
    var options = {
      keys: [
        { name: 'title', weight: 20 },
        { name: 'categories', weight: 15 },
        { name: 'description', weight: 10 },
        { name: 'contents', weight: 5 },
      ],
      ignoreLocation: true,
      threshold: 0
    };
    var fuse = new window.Fuse([], options);

    // fetch the main search.json
    return fetch(offsetURL('search.json'))
      .then(function(response) {
        if (response.status == 200) {
          return response.json().then(function(json) {
            // index main articles
            json.articles.forEach(function(article) {
              fuse.add(article);
            });
            // download collections and index their articles
            return Promise.all(json.collections.map(function(collection) {
              return fetch(offsetURL(collection)).then(function(response) {
                if (response.status === 200) {
                  return response.json().then(function(articles) {
                    articles.forEach(function(article) {
                      fuse.add(article);
                    });
                  })
                } else {
                  return Promise.reject(
                    new Error('Unexpected status from search index request: ' +
                              response.status)
                  );
                }
              });
            })).then(function() {
              return fuse;
            });
          });

        } else {
          return Promise.reject(
            new Error('Unexpected status from search index request: ' +
                        response.status)
          );
        }
      });
  }

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // get search element (bail if we don't have one)
    var searchEl = window.document.getElementById('distill-search');
    if (!searchEl)
      return;

    createFuseIndex()
      .then(function(fuse) {

        // make search box visible
        searchEl.classList.remove('hidden');

        // initialize autocomplete
        var options = {
          autoselect: true,
          hint: false,
          minLength: 2,
        };
        window.autocomplete(searchEl, options, [{
          source: function(query, callback) {
            const searchOptions = {
              isCaseSensitive: false,
              shouldSort: true,
              minMatchCharLength: 2,
              limit: 10,
            };
            var results = fuse.search(query, searchOptions);
            callback(results
              .map(function(result) { return result.item; })
            );
          },
          templates: {
            suggestion: function(suggestion) {
              var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
                ? `<img src="${offsetURL(suggestion.preview)}"</img>`
                : '';
              var html = `
                <div class="search-item">
                  <h3>${suggestion.title}</h3>
                  <div class="search-item-description">
                    ${suggestion.description || ''}
                  </div>
                  <div class="search-item-preview">
                    ${img}
                  </div>
                </div>
              `;
              return html;
            }
          }
        }]).on('autocomplete:selected', function(event, suggestion) {
          window.location.href = offsetURL(suggestion.path);
        });
        // remove inline display style on autocompleter (we want to
        // manage responsive display via css)
        $('.algolia-autocomplete').css("display", "");
      })
      .catch(function(error) {
        console.log(error);
      });

  });

  </script>

  <style type="text/css">

  .nav-search {
    font-size: x-small;
  }

  /* Algolioa Autocomplete */

  .algolia-autocomplete {
    display: inline-block;
    margin-left: 10px;
    vertical-align: sub;
    background-color: white;
    color: black;
    padding: 6px;
    padding-top: 8px;
    padding-bottom: 0;
    border-radius: 6px;
    border: 1px #0F2E3D solid;
    width: 180px;
  }


  @media screen and (max-width: 768px) {
    .distill-site-nav .algolia-autocomplete {
      display: none;
      visibility: hidden;
    }
    .distill-site-nav.responsive .algolia-autocomplete {
      display: inline-block;
      visibility: visible;
    }
    .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
      margin-left: 0;
      width: 400px;
      max-height: 400px;
    }
  }

  .algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
    width: 90%;
    outline: none;
    border: none;
  }

  .algolia-autocomplete .aa-hint {
    color: #999;
  }
  .algolia-autocomplete .aa-dropdown-menu {
    width: 550px;
    max-height: 70vh;
    overflow-x: visible;
    overflow-y: scroll;
    padding: 5px;
    margin-top: 3px;
    margin-left: -150px;
    background-color: #fff;
    border-radius: 5px;
    border: 1px solid #999;
    border-top: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
    cursor: pointer;
    padding: 5px 4px;
    border-bottom: 1px solid #eee;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
    border-bottom: none;
    margin-bottom: 2px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
    overflow: hidden;
    font-size: 0.8em;
    line-height: 1.4em;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
    font-size: 1rem;
    margin-block-start: 0;
    margin-block-end: 5px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
    display: inline-block;
    overflow: hidden;
    height: 2.8em;
    width: 80%;
    margin-right: 4%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
    display: inline-block;
    width: 15%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
    height: 3em;
    width: auto;
    display: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
    display: initial;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
    background-color: #eee;
  }
  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
    font-weight: bold;
    font-style: normal;
  }

  </style>


  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
    font-size: 100%;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        const citeChild = $(this).children()[0]
        // Do not process if @xyz has been used without escaping and without bibliography activated
        // https://github.com/rstudio/distill/issues/466
        if (citeChild === undefined) return true

        if (citeChild.nodeName == "D-FOOTNOTE") {
          var fn = citeChild
          $(this).html(fn.shadowRoot.querySelector("sup"))
          $(this).id = fn.id
          fn.remove()
        }
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          // Could use CSS.escape too here, we insure backward compatibility in navigator
          return "<p>" + $('div[id="ref-' + ref + '"]').html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // fix footnotes in tables (#411)
      // replacing broken distill.pub feature
      $('table d-footnote').each(function() {
        // we replace internal showAtNode methode which is triggered when hovering a footnote
        this.hoverBox.showAtNode = function(node) {
          // ported from https://github.com/distillpub/template/pull/105/files
          calcOffset = function(elem) {
              let x = elem.offsetLeft;
              let y = elem.offsetTop;
              // Traverse upwards until an `absolute` element is found or `elem`
              // becomes null.
              while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                  x += elem.offsetLeft;
                  y += elem.offsetTop;
              }

              return { left: x, top: y };
          }
          // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
          const bbox = node.getBoundingClientRect();
          const offset = calcOffset(node);
          this.show([offset.left + bbox.width, offset.top + bbox.height]);
        }
      })

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      // ignore leaflet img layers (#106)
      figures = figures.filter(':not(img[class*="leaflet"])')
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="site_libs/header-attrs-2.13/header-attrs.js"></script>
  <link href="site_libs/panelset-0.2.6/panelset.css" rel="stylesheet" />
  <script src="site_libs/panelset-0.2.6/panelset.js"></script>
  <script src="site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Functions in R","authors":[]}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a class="logo" href="https://www.ons.gov.uk/">
<img src="images/ONS_Logo_Digital_White_Landscape_English_RGB.png" alt="Logo"/>
</a>
<a href="index.html" class="title">RAPID training</a>
</div>
<div class="nav-right">
<div class="nav-dropdown">
<button class="nav-dropbtn">
RAP training in R
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="control_flow.html">Control Flow</a>
<a href="functions.html">Functions</a>
<a href="advanced_functions.html">Advanced Functions</a>
<a href="projects.html">Project structure</a>
<a href="packages.html">Packages and unit tests</a>
<a href="glossary.html">Glossary</a>
</div>
</div>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Functions in R</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->

</div>


<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#intro">What are Functions?</a>
<ul>
<li><a href="#benefit-of-functions">Benefit of Functions</a></li>
<li><a href="#repetitive-vs-functionalised-code">Repetitive vs functionalised code</a></li>
<li><a href="#three-elements-of-a-function">Three Elements of a Function</a></li>
<li><a href="#analogy-baking-a-cake">Analogy: Baking a Cake</a></li>
<li><a href="#two-main-types-of-functions">Two main types of functions:</a></li>
</ul></li>
<li><a href="#how-to-write-and-call-a-function">How to write and call a function</a>
<ul>
<li><a href="#nested-functions">Nested functions</a></li>
<li><a href="#wrapper-functions">Wrapper Functions</a></li>
</ul></li>
<li><a href="#arguments">Arguments</a>
<ul>
<li><a href="#required-arguments">Required arguments</a></li>
<li><a href="#default-arguments">Default arguments</a></li>
<li><a href="#quiz-1">Quiz 1</a></li>
<li><a href="#assignment">Assignment</a></li>
<li><a href="#order-of-arguments-for-existing-and-own-functions">Order of arguments for existing and own functions</a></li>
<li><a href="#functions-intro-excercises">Functions intro excercises</a></li>
</ul></li>
<li><a href="#best-practice-style-for-functions">Best Practice <strong>Style</strong> for functions</a>
<ul>
<li><a href="#function-name">Function name</a></li>
<li><a href="#lines">Lines</a></li>
<li><a href="#spacing">Spacing</a></li>
<li><a href="#indentation">Indentation</a></li>
<li><a href="#returns">Returns</a></li>
<li><a href="#assignment-1">Assignment</a></li>
<li><a href="#arguments-1">Arguments</a></li>
<li><a href="#comments">Comments</a></li>
<li><a href="#piping-styledplyr-advanced">Piping <code>%&gt;%</code> style/<code>dplyr</code> (Advanced)</a></li>
<li><a href="#quiz-2">Quiz 2</a></li>
</ul></li>
<li><a href="#docstrings">Documentation (docstrings)</a>
<ul>
<li><a href="#function-documentation-roxygen2">Function documentation: <code>roxygen2</code></a></li>
<li><a href="#quiz-3">Quiz 3</a></li>
</ul></li>
<li><a href="#piping">Piping <code>%&gt;%</code></a></li>
<li><a href="#warnings-and-errors">Warnings and Errors</a>
<ul>
<li><a href="#warnings">Warnings</a></li>
<li><a href="#errors">Errors</a></li>
<li><a href="#quiz-3-1">Quiz 3</a></li>
<li><a href="#function-exercises-cd">Function exercises cd</a></li>
</ul></li>
<li><a href="#additional-resources">Additional resources</a></li>
</ul>
</nav>
</div>
<p><strong>Prerequisites:</strong></p>
<ul>
<li>RStudio and R installed on laptop<br />
</li>
<li>Packages required: <code>tidyverse</code><br />
</li>
<li>Basic R coding skills</li>
</ul>
<h1 id="intro">What are Functions?</h1>
<p>Collection of statements orchestrated together to perform a specific operation.<br />
A function takes input (arguments), applies a method (code) to those arguments and returns the output.<br />
Hopefully everyone in this session has experience of using functions when they code in R.<br />
E.g. <code>sum()</code> or <code>mean()</code>.<br />
<em>Note:</em> Functions are objects, just as vectors are objects.</p>
<h2 id="benefit-of-functions">Benefit of Functions</h2>
<ul>
<li>Reduce repetition</li>
<li>Reproducibility</li>
<li>Shorten code</li>
<li>Editability</li>
<li>Time-saving</li>
<li>Quality</li>
</ul>
<h2 id="repetitive-vs-functionalised-code">Repetitive vs functionalised code</h2>
<p>We want the average Petal Length/Petal Width ratio for the Sepal Lengths of less than 5, for each species separately (setosa, versicolor, virginica).</p>
<div class="panelset">
<section id="without-functions" class="panel-name panel">
<h3 class="panel-name">Without functions</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>setosa</span> <span class='op'>&lt;-</span> <span class='va'>iris</span><span class='op'>[</span><span class='va'>iris</span><span class='op'>$</span><span class='va'>Species</span> <span class='op'>==</span> <span class='st'>"setosa"</span>, <span class='op'>]</span></span>
<span><span class='va'>setosa</span> <span class='op'>&lt;-</span> <span class='va'>setosa</span><span class='op'>[</span><span class='va'>setosa</span><span class='op'>$</span><span class='va'>Sepal.Length</span> <span class='op'>&lt;</span> <span class='fl'>7</span>, <span class='op'>]</span></span>
<span><span class='va'>setosa</span><span class='op'>$</span><span class='va'>petal_length_width_ratio</span> <span class='op'>&lt;-</span> <span class='va'>setosa</span><span class='op'>$</span><span class='va'>Petal.Length</span> <span class='op'>/</span> <span class='va'>setosa</span><span class='op'>$</span><span class='va'>Petal.Width</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>setosa</span><span class='op'>$</span><span class='va'>petal_length_width_ratio</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>versicolor</span> <span class='op'>&lt;-</span> <span class='va'>iris</span><span class='op'>[</span><span class='va'>iris</span><span class='op'>$</span><span class='va'>Species</span> <span class='op'>==</span> <span class='st'>"versicolor"</span>, <span class='op'>]</span></span>
<span><span class='va'>versicolor</span> <span class='op'>&lt;-</span> <span class='va'>versicolor</span><span class='op'>[</span><span class='va'>versicolor</span><span class='op'>$</span><span class='va'>Sepal.Length</span> <span class='op'>&lt;</span> <span class='fl'>7</span>, <span class='op'>]</span></span>
<span><span class='va'>versicolor</span><span class='op'>$</span><span class='va'>petal_length_width_ratio</span> <span class='op'>&lt;-</span></span>
<span><span class='va'>versicolor</span><span class='op'>$</span><span class='va'>Petal.Length</span> <span class='op'>/</span> <span class='va'>versicolor</span><span class='op'>$</span><span class='va'>Petal.Width</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>versicolor</span><span class='op'>$</span><span class='va'>petal_length_width_ratio</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>virginica</span> <span class='op'>&lt;-</span> <span class='va'>iris</span><span class='op'>[</span><span class='va'>iris</span><span class='op'>$</span><span class='va'>Species</span> <span class='op'>==</span> <span class='st'>"virginica"</span>, <span class='op'>]</span></span>
<span><span class='va'>virginica</span> <span class='op'>&lt;-</span> <span class='va'>virginica</span><span class='op'>[</span><span class='va'>virginica</span><span class='op'>$</span><span class='va'>Sepal.Length</span> <span class='op'>&lt;</span> <span class='fl'>7</span>, <span class='op'>]</span></span>
<span><span class='va'>virginica</span><span class='op'>$</span><span class='va'>petal_length_width_ratio</span> <span class='op'>&lt;-</span></span>
<span><span class='va'>virginica</span><span class='op'>$</span><span class='va'>Petal.Length</span> <span class='op'>/</span> <span class='va'>virginica</span><span class='op'>$</span><span class='va'>Petal.Width</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>virginica</span><span class='op'>$</span><span class='va'>petal_length_width_ratio</span><span class='op'>)</span></span></code></pre>
</div>
</div>
</section>
<section id="with-functions" class="panel-name panel">
<h3 class="panel-name">With functions</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>iris_function</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>species</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>data</span> <span class='op'>&lt;-</span> <span class='va'>data</span><span class='op'>[</span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>Species</span> <span class='op'>==</span> <span class='va'>species</span><span class='op'>)</span> <span class='op'>&amp;</span> <span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>Sepal.Length</span> <span class='op'>&lt;</span> <span class='fl'>7</span><span class='op'>)</span>, <span class='op'>]</span></span>
<span>  <span class='va'>data</span><span class='op'>$</span><span class='va'>petal_length_width_ratio</span> <span class='op'>&lt;-</span> <span class='va'>data</span><span class='op'>$</span><span class='va'>Petal.Length</span> <span class='op'>/</span> <span class='va'>data</span><span class='op'>$</span><span class='va'>Petal.Width</span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>petal_length_width_ratio</span><span class='op'>)</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='fu'>iris_function</span><span class='op'>(</span><span class='va'>iris</span>, <span class='st'>"setosa"</span><span class='op'>)</span></span>
<span><span class='fu'>iris_function</span><span class='op'>(</span><span class='va'>iris</span>, <span class='st'>"versicolor"</span><span class='op'>)</span></span>
<span><span class='fu'>iris_function</span><span class='op'>(</span><span class='va'>iris</span>, <span class='st'>"virginica"</span><span class='op'>)</span></span></code></pre>
</div>
</div>
</section>
</div>
<h2 id="three-elements-of-a-function">Three Elements of a Function</h2>
<p><strong>Arguments</strong></p>
<p>Controls how you call the function.<br />
Can check it with: <code>formals(function_name)</code></p>
<p><strong>Body</strong></p>
<p>The code inside a function.<br />
Can check it with: <code>body(function_name)</code></p>
<p><strong>Environment (Advanced)</strong></p>
<p>The data structure that determines how the function finds the values associated with the names.<br />
Can check it with: <code>environment(function_name)</code></p>
<h2 id="analogy-baking-a-cake">Analogy: Baking a Cake</h2>
<p>A <em>pipeline</em> consists of multiple steps (involving functions) to achieve a desired output, just like how a cake recipe has steps/instructions to make a cake.</p>
<p>Lets simplify that and say that each step of a pipeline can a function a.k.a. a step of the recipe.</p>
<h3 id="for-example---cream-together-the-butter-and-sugar-in-a-mixing-bowl-with-a-wooden-spoon-until-light-and-fluffy"><strong>For Example</strong> - Cream together the butter and sugar in a mixing bowl with a wooden spoon until light and fluffy :</h3>
<ul>
<li>The <strong>ingredients</strong> (butter and sugar) are the <strong>arguments</strong>.</li>
<li>The bowl and spoon are your <strong>cooking tools</strong>, similar to <strong>existing functions</strong> that you want to use in your custom function. These may not be needed for all functions but can make what you are doing much easier!<br />
</li>
<li>The <strong>method</strong> of creaming the ingredients using the tools you need is the <strong>code body</strong>.</li>
<li>The <strong>output</strong> is <strong>creamed butter and sugar</strong>. This might not be the final product/exactly what you want if you are baking a cake but it is what you need for the next stage in the process.</li>
</ul>
<h2 id="two-main-types-of-functions">Two main types of functions:</h2>
<ol type="1">
<li>Nested functions (sub-functions)
<ul>
<li>Single, modular units of code (collection of statements) that do a single isolated process.</li>
</ul></li>
<li>Wrapper functions
<ul>
<li>Functions that call other sub-functions/processes to perform multiple linked processes together.</li>
</ul></li>
</ol>
<h1 id="how-to-write-and-call-a-function">How to write and call a function</h1>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>##### Standard syntax</span></span>
<span><span class='va'>function_name</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>argument</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>code</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'># If you don't want to assign the output of the function to a variable:</span></span>
<span><span class='fu'>function_name</span><span class='op'>(</span>argument <span class='op'>=</span> <span class='st'>"value"</span><span class='op'>)</span></span>
<span><span class='fu'>function_name</span><span class='op'>(</span><span class='st'>"value"</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># If you want to assign the output of the function to a variable:</span></span>
<span><span class='va'>function_output</span> <span class='op'>&lt;-</span> <span class='fu'>function_name</span><span class='op'>(</span>argument <span class='op'>=</span> <span class='st'>"value"</span><span class='op'>)</span></span>
<span><span class='va'>function_output</span> <span class='op'>&lt;-</span> <span class='fu'>function_name</span><span class='op'>(</span><span class='st'>"value"</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h3 id="return"><code>return()</code></h3>
<p>In the syntax above, I have just used <code>code</code> as a stand in for the body of the function.</p>
<p>When running a function, the code chunk will run, but only the last line will be output into the environment/saved when assigned to a variable. Some like to explicitly use <code>return()</code> to show what is being returned at the end of the function, but it is not necessary.</p>
<p>Also, <code>print()</code> statements will be output into the console.</p>
<p>It is worth being aware that any variables that are assigned inside a function, dont automatically exist in the outside environment (cant be retrieved after the function has run).</p>
<p>Would recommend playing around with assignment with your functions.</p>
<p>There is a way to save more to the environment but that hasnt been covered here.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>alphabet</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>var_1</span> <span class='op'>&lt;-</span> <span class='st'>"a"</span> <span class='co'># var_1 doesn't exist</span></span>
<span>  <span class='va'>var_2</span> <span class='op'>&lt;-</span> <span class='st'>"b"</span> <span class='co'># is not output because it is</span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>var_1</span><span class='op'>)</span> <span class='co'># because paste is used, var_1/a is output</span></span>
<span>                  <span class='co'># but not saved when the variable is assigned </span></span>
<span>  <span class='st'>"c"</span> <span class='co'># This is what is saved and assigned to the variable</span></span>
<span><span class='op'>}</span></span></code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>alphabet</span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;a&quot;</code></pre>
<pre><code>[1] &quot;c&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># The print is still printed to console, but what is the last line is not</span></span>
<span><span class='va'>out</span> <span class='op'>&lt;-</span> <span class='fu'>alphabet</span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;a&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># The last line is saved into the environment in the "out" variable</span></span>
<span><span class='va'>out</span></span></code></pre>
</div>
<pre><code>[1] &quot;c&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># This doesn't exist outside the function, only within the function</span></span>
<span>  <span class='co'># So cannot be retrieved</span></span>
<span><span class='va'>var_1</span></span></code></pre>
</div>
<pre><code>Error in eval(expr, envir, enclos): object &#39;var_1&#39; not found</code></pre>
</div>
<h3 id="calling-functions-from-packages">Calling functions from packages</h3>
<p>Before you can use a function that doesnt exist in <code>base r</code>, you need to either:</p>
<ul>
<li><code>library()</code> the package that contains the function which loads the function into your environment<br />
</li>
<li>or explicitly call the function from the package it is in using <code>package_name::function_name()</code></li>
</ul>
<p>We recommend using <code>package_name::function_name()</code> because it keeps your environment clearer and there is no potential confusion if there are multiple functions with the same name.</p>
<p>Plus, it makes it easier for someone reading the code and to look into the correct documentation if necessary.</p>
<p>This works for existing/published packages or your own custom packages. However, for this training, as the functions arent packaged, we will rarely use that notation.</p>
<h2 id="nested-functions">Nested functions</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>## Example 1: Addition</span></span>
<span><span class='va'>sum_two_numbers</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>number_1</span>, <span class='va'>number_2</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>number_1</span> <span class='op'>+</span> <span class='va'>number_2</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='fu'>sum_two_numbers</span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>3</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 13</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>sum_two_numbers</span><span class='op'>(</span>number_1 <span class='op'>=</span> <span class='fl'>11</span>, number_2 <span class='op'>=</span> <span class='fl'>22</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 33</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>## Example 2: Temperature Conversions</span></span>
<span><span class='co'># Fahrenheit to Celsius</span></span>
<span><span class='va'>degree_F_to_C</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='op'>(</span><span class='va'>temp_F</span> <span class='op'>-</span> <span class='fl'>32</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>5</span> <span class='op'>/</span> <span class='fl'>9</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'># Freezing point of water</span></span>
<span><span class='fu'>degree_F_to_C</span><span class='op'>(</span><span class='fl'>32</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 0</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># Boiling point of water</span></span>
<span><span class='fu'>degree_F_to_C</span><span class='op'>(</span><span class='fl'>212</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 100</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># Celsius to Kelvin</span></span>
<span><span class='va'>degree_C_to_K</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>temp_C</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>temp_C</span> <span class='op'>+</span> <span class='fl'>273.15</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'># Freezing point of water in Kelvin</span></span>
<span><span class='fu'>degree_C_to_K</span><span class='op'>(</span><span class='fl'>0</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 273.15</code></pre>
</div>
<h2 id="wrapper-functions">Wrapper Functions</h2>
<p>Most functions will be wrapper functions of some sort. They will use existing published functions and/or custom functions to do more complex operations.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>## Example 1: Addition</span></span>
<span></span>
<span><span class='va'>double_sum_two_numbers</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>number_1</span>, <span class='va'>number_2</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='fu'>sum_two_numbers</span><span class='op'>(</span><span class='va'>number_1</span>, <span class='va'>number_2</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>2</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='fu'>double_sum_two_numbers</span><span class='op'>(</span><span class='fl'>6</span>, <span class='fl'>5</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 22</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>## Example 2: Temperature Conversions</span></span>
<span></span>
<span><span class='co'># Can nest related functions to run one after another</span></span>
<span><span class='co'># Freezing point of water in Kelvin</span></span>
<span><span class='fu'>degree_C_to_K</span><span class='op'>(</span><span class='fu'>degree_F_to_C</span><span class='op'>(</span><span class='fl'>32</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 273.15</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># Or combine the functions/processes into a single wrapper function</span></span>
<span><span class='co'># This looks like more effort/code lines, but calling it is easier,</span></span>
<span>  <span class='co'># it reads easier and you can add more processes to the function,</span></span>
<span>    <span class='co'># not just nest the two function</span></span>
<span><span class='va'>degree_F_to_K</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>temp_C</span> <span class='op'>&lt;-</span> <span class='fu'>degree_F_to_C</span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span></span>
<span>  <span class='fu'>degree_C_to_K</span><span class='op'>(</span><span class='va'>temp_C</span><span class='op'>)</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'># And you can nest it within the function, so it is short, clear, easy to call</span></span>
<span><span class='va'>degree_F_to_K_nested</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='fu'>degree_C_to_K</span><span class='op'>(</span><span class='fu'>degree_F_to_C</span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'># Freezing point of water in Kelvin</span></span>
<span><span class='fu'>degree_F_to_K</span><span class='op'>(</span><span class='fl'>32</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 273.15</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>degree_F_to_K_nested</span><span class='op'>(</span><span class='fl'>32</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 273.15</code></pre>
</div>
<h1 id="arguments">Arguments</h1>
<p>By default, R will match arguments in the order they are used to the order they are in the function syntax.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>simple_function</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>arg_1</span>, <span class='va'>arg_2</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>arg_1</span>, <span class='va'>arg_2</span>, sep <span class='op'>=</span> <span class='st'>" - "</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'># Note the first argument relates to arg_1 as the argument name was not specified</span></span>
<span>  <span class='co'># And vice versa</span></span>
<span><span class='fu'>simple_function</span><span class='op'>(</span><span class='st'>"this will be first"</span>, <span class='st'>"this will be second"</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;this will be first - this will be second&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># Note the first argument relates to arg_2 as it is specified and vice versa</span></span>
<span><span class='fu'>simple_function</span><span class='op'>(</span>arg_2 <span class='op'>=</span> <span class='st'>"this will not be first"</span>, </span>
<span>                arg_1 <span class='op'>=</span> <span class='st'>"this will not be second"</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] &quot;this will not be second - this will not be first&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># Another example</span></span>
<span><span class='va'>minus_number</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>starting_value</span>, <span class='va'>take_away</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>starting_value</span> <span class='op'>-</span> <span class='va'>take_away</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='fu'>minus_number</span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>5</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 5</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>minus_number</span><span class='op'>(</span><span class='fl'>5</span>, <span class='fl'>10</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] -5</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># This is the same because you are specifying the arguments</span></span>
<span><span class='fu'>minus_number</span><span class='op'>(</span>take_away <span class='op'>=</span> <span class='fl'>10</span>, starting_value <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] -5</code></pre>
</div>
<h2 id="required-arguments">Required arguments</h2>
<p>If an argument that is used in the function is missing, it will error.</p>
<p>However, R executes functions in a <em>lazy fashion</em>. If arguments not required in the function are missing, the function will still be executed. Even though it doesnt error, best practice is to make sure only arguments used in the code body are included.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>## Example 1: Addition</span></span>
<span></span>
<span><span class='co'># Function has 3 arguments, even though only 2 are used</span></span>
<span><span class='va'>double_sum_two_numbers_three</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>number_1</span>, <span class='va'>number_2</span>, <span class='va'>number_3</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='fu'>sum_two_numbers</span><span class='op'>(</span><span class='va'>number_1</span>, <span class='va'>number_2</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>2</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'># All three arguments are provided, even though number3 isn't used, but no error</span></span>
<span><span class='fu'>double_sum_two_numbers_three</span><span class='op'>(</span><span class='fl'>6</span>, <span class='fl'>94</span>, <span class='fl'>20</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 200</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># This takes these two arguments as the first two arguments and</span></span>
<span>  <span class='co'># as number3 isn't used, it doesn't matter that it is missing</span></span>
<span>    <span class='co'># Still no error</span></span>
<span><span class='fu'>double_sum_two_numbers_three</span><span class='op'>(</span><span class='fl'>88</span>, <span class='op'>-</span><span class='fl'>4</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 168</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># Number_1 is missing and there is no default</span></span>
<span><span class='fu'>double_sum_two_numbers_three</span><span class='op'>(</span>number_2 <span class='op'>=</span> <span class='op'>-</span><span class='fl'>5</span>, number3 <span class='op'>=</span> <span class='fl'>12</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>Error in double_sum_two_numbers_three(number_2 = -5, number3 = 12): unused argument (number3 = 12)</code></pre>
</div>
<h2 id="default-arguments">Default arguments</h2>
<p>In all the examples above, we have only used arguments that require <em>user inputs</em>.</p>
<p>However, there will be some arguments which have a <strong>default</strong> value so they do <strong>not</strong> need to be user defined every time when calling the function.</p>
<p><strong>Defaults</strong> can be set when the argument rarely need changing when running the function.</p>
<p>For very bespoke functions, these defaults can be very specific to their use-case.</p>
<h3 id="common-default-arguments-are">Common default arguments are:</h3>
<ul>
<li><code>NA</code></li>
<li><code>NULL</code></li>
<li></li>
<li>generic title</li>
<li><code>TRUE</code>/<code>FALSE</code></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>## Example 1: Addition</span></span>
<span></span>
<span><span class='va'>double_sum_two_numbers_default</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>number_1</span>, <span class='va'>number_2</span> <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='fu'>sum_two_numbers</span><span class='op'>(</span><span class='va'>number_1</span>, <span class='va'>number_2</span><span class='op'>)</span><span class='op'>*</span><span class='fl'>2</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'># Just doubles the given argument (takes it as number_1)</span></span>
<span>  <span class='co'># as number_2 is 0 by default</span></span>
<span><span class='fu'>double_sum_two_numbers_default</span><span class='op'>(</span><span class='fl'>33</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 66</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># This is still missing number_1 as only number_2 had a default so errors</span></span>
<span><span class='fu'>double_sum_two_numbers_default</span><span class='op'>(</span>number_2 <span class='op'>=</span> <span class='fl'>33</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>Error in sum_two_numbers(number_1, number_2): argument &quot;number_1&quot; is missing, with no default</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>## Example 2: Temperature Conversions</span></span>
<span></span>
<span><span class='co'># Here the default is 32 degree F aka 0 degree C</span></span>
<span><span class='va'>degree_F_to_K_default</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>temp_F</span> <span class='op'>=</span> <span class='fl'>32</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='fu'>degree_C_to_K</span><span class='op'>(</span><span class='fu'>degree_F_to_C</span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'># So to use the default, can leave arguments blank</span></span>
<span><span class='fu'>degree_F_to_K_default</span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 273.15</code></pre>
</div>
<h2 id="quiz-1">Quiz 1</h2>
<div class="panelset">
<section id="question" class="panel-name panel">
<h3 class="panel-name">Question</h3>
<p>Which of these functions has a default argument?</p>
<ol type="A">
<li>
<code>function(first_name, surname) {</code>
</li>
<li>
<code>function(age) {</code>
</li>
<li>
<code>function(film_name, year = NA) {</code>
</li>
<li>
<code>function(first_arg, default) {</code>
</li>
</ol>
</section>
<section id="see-answer" class="panel-name panel">
<h3 class="panel-name">See Answer</h3>
<p>Which of these functions has a default argument?</p>
<ol type="A">
<li>
<code>function(first_name, surname) {</code>
</li>
<li>
<code>function(age) {</code>
</li>
<li>
<b><code>function(film_name, year = NA) {</code></b>
</li>
<li>
<code>function(first_arg, default) {</code>
</li>
</ol>
</section>
</div>
<h2 id="assignment">Assignment</h2>
<p>When assigning something inside a function, the object will not be saved to the external environment, so you cannot access it after the function has finished running.<br />
Only the final printout of the function (or <code>return()</code>) or anything that is run in <code>print()</code> is run.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>##### Example 1: Addition</span></span>
<span></span>
<span><span class='va'>sum_two_numbers_assign</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>number_1</span>, <span class='va'>number_2</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>sum</span> <span class='op'>&lt;-</span> <span class='va'>number_1</span> <span class='op'>+</span> <span class='va'>number_2</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'># Nothing printed out</span></span>
<span><span class='fu'>sum_two_numbers_assign</span><span class='op'>(</span>number_1 <span class='op'>=</span> <span class='fl'>1</span>, number_2 <span class='op'>=</span> <span class='fl'>6</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'>##### Example 2: Temperature Conversions</span></span>
<span></span>
<span><span class='va'>degree_F_to_K</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>temp_C</span> <span class='op'>&lt;-</span> <span class='fu'>degree_F_to_C</span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span></span>
<span>  <span class='fu'>degree_C_to_K</span><span class='op'>(</span><span class='va'>temp_C</span><span class='op'>)</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'># Freezing water in Kelvin returns the output</span></span>
<span><span class='fu'>degree_F_to_K</span><span class='op'>(</span>temp_F <span class='op'>=</span> <span class='fl'>32</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 273.15</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>degree_F_to_K_assign</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>temp_C</span> <span class='op'>&lt;-</span> <span class='fu'>degree_F_to_C</span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span></span>
<span>  <span class='va'>temp_K</span> <span class='op'>&lt;-</span> <span class='fu'>degree_C_to_K</span><span class='op'>(</span><span class='va'>temp_C</span><span class='op'>)</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'># Freezing water in Kelvin will now not print the output</span></span>
<span><span class='fu'>degree_F_to_K_assign</span><span class='op'>(</span>temp_F <span class='op'>=</span> <span class='fl'>32</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h2 id="order-of-arguments-for-existing-and-own-functions">Order of arguments for existing and own functions</h2>
<p>As seen in previous examples, if no argument names are given, the function takes arguments in the order they are given.<br />
When writing your own (and is seen in most published functions), first should always be data.</p>
<p>This is especially important when using in <code>dplyr</code> pipes.<br />
Unfortunately, there are some older cases where that may not be the case, so it may be worth checking before you use them.</p>
<p>More information about this can be found in the <a href="#piping">piping section</a>.</p>
<h2 id="functions-intro-excercises">Functions intro excercises</h2>
<div class="panelset">
<section id="exercises" class="panel-name panel">
<h3 class="panel-name">Exercises</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>##### Exercise 1 -</span></span>
<span></span>
<span><span class='co'># Create a function that will divide any number by 15</span></span>
<span></span>
<span></span>
<span><span class='co'>##### Exercise 2 -</span></span>
<span></span>
<span><span class='co'># Create a function that will divide any vector, by any number, with the</span></span>
<span><span class='co'># default denominator value as 10.</span></span>
<span></span>
<span><span class='co'># Try assigning within the function and outside the function</span></span>
<span><span class='co'># to cause the output to be printed vs just being assigned</span></span>
<span><span class='co'># Hint: Think about the "Environment"</span></span>
<span></span>
<span><span class='co'>##### Exercise 3 -</span></span>
<span></span>
<span><span class='co'># Create a function that computes weighted average using a vector containing</span></span>
<span><span class='co'># all values and a second vector containing their respective weights.</span></span>
<span><span class='co'># * there is already function in R that does it, but create your own</span></span>
<span></span>
<span><span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>15</span>, <span class='fl'>35</span>, <span class='fl'>50</span>, <span class='fl'>10</span><span class='op'>)</span></span>
<span><span class='va'>weighting</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fl'>5</span>, <span class='fl'>3</span>, <span class='fl'>9</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># Hint: the formula for weighted average is:</span></span>
<span>  <span class='co'># divide the sum of (data times weighting) by the sum of the weights</span></span>
<span></span>
<span><span class='co'>##### Exercise 4 -</span></span>
<span></span>
<span><span class='co'># Create a function that will multiply selected column name by a given number.</span></span>
<span><span class='co'># This should return just the multiplied dataframe column.</span></span>
<span><span class='co'># Default multiplier should be 5.</span></span>
<span></span>
<span><span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span></span>
<span>  a <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>,</span>
<span>  b <span class='op'>=</span> <span class='fl'>4</span><span class='op'>:</span><span class='fl'>6</span>,</span>
<span>  c <span class='op'>=</span> <span class='fl'>7</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span></span></code></pre>
</div>
</div>
</section>
<section id="example-solutions" class="panel-name panel">
<h3 class="panel-name">Example solutions</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span></span>
<span></span>
<span><span class='co'>##### Answer 1 -----</span></span>
<span></span>
<span><span class='co'>#' Divide any number/numeric vector by 15</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @description Takes input of single number or vector of numbers and divides</span></span>
<span><span class='co'>#' each element by 15.</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @param x numeric vector</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @return numeric vector</span></span>
<span><span class='va'>divide_15</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>x</span> <span class='op'>/</span> <span class='fl'>15</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='fu'>divide_15</span><span class='op'>(</span><span class='fl'>150</span><span class='op'>)</span></span>
<span><span class='fu'>divide_15</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>15</span>, <span class='fl'>45</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span></span>
<span><span class='co'>##### Answer 2 -----</span></span>
<span></span>
<span><span class='co'>#' Divide any numeric vector by any number.</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @description Divides a numeric vector by any number, default is 10.</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @param x numeric vector</span></span>
<span><span class='co'>#' @param denominator numeric, default is 10</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @return numeric vector</span></span>
<span><span class='va'>divide</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>denominator</span> <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>x</span> <span class='op'>/</span> <span class='va'>denominator</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='fu'>divide</span><span class='op'>(</span><span class='fl'>150</span><span class='op'>)</span></span>
<span><span class='fu'>divide</span><span class='op'>(</span>x <span class='op'>=</span> <span class='fl'>150</span>, denominator <span class='op'>=</span> <span class='fl'>15</span><span class='op'>)</span></span>
<span><span class='fu'>divide</span><span class='op'>(</span><span class='fl'>150</span>, <span class='fl'>15</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># Output does not print to console when this is used - AVOID</span></span>
<span><span class='va'>divide</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>denominator</span> <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>divided_num</span> <span class='op'>&lt;-</span> <span class='va'>x</span> <span class='op'>/</span> <span class='va'>denominator</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'># Can save it as an intermediate and then return it but this is not best</span></span>
<span>  <span class='co'># practice</span></span>
<span><span class='va'>divide</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>denominator</span> <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>divided_num</span> <span class='op'>&lt;-</span> <span class='va'>x</span> <span class='op'>/</span> <span class='va'>denominator</span></span>
<span>  <span class='va'>divided_num</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'># When the output of a function is saved as a variable</span></span>
<span>  <span class='co'># the output is not printed to the console</span></span>
<span><span class='va'>divided</span> <span class='op'>&lt;-</span> <span class='fu'>divide</span><span class='op'>(</span><span class='fl'>450</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># But you can now retrieve it with the variable name</span></span>
<span><span class='va'>divided</span></span>
<span></span>
<span><span class='co'>##### Answer 3 -----</span></span>
<span></span>
<span><span class='co'>#' Computes weighted average.</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @description Computes weighted average from a vector of values,</span></span>
<span><span class='co'>#' using a vector of respective weights.</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @param values numeric vector of values/data to be weighted</span></span>
<span><span class='co'>#' @param weights numeric vector of weights</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @return numeric weighted average</span></span>
<span><span class='va'>compute_weighted_avg</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>values</span>, <span class='va'>weights</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>values</span> <span class='op'>*</span> <span class='va'>weights</span><span class='op'>)</span> <span class='op'>/</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>weights</span><span class='op'>)</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='fu'>compute_weighted_avg</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>30</span>, <span class='fl'>50</span>, <span class='fl'>110</span>, <span class='fl'>40</span><span class='op'>)</span>, weights <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>9</span>, <span class='fl'>8</span>, <span class='fl'>7</span>, <span class='fl'>6</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>15</span>, <span class='fl'>35</span>, <span class='fl'>50</span>, <span class='fl'>10</span><span class='op'>)</span></span>
<span><span class='va'>weighting</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fl'>5</span>, <span class='fl'>3</span>, <span class='fl'>9</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'>compute_weighted_avg</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>weighting</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'>##### Answer 4 -----</span></span>
<span></span>
<span><span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span></span>
<span>  a <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>,</span>
<span>  b <span class='op'>=</span> <span class='fl'>4</span><span class='op'>:</span><span class='fl'>6</span>,</span>
<span>  c <span class='op'>=</span> <span class='fl'>7</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'>#' Multiply selected dataframe column by given number</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @description Multiply selected column by a given number.</span></span>
<span><span class='co'>#' Default multiplier is 5.</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @param df dataframe with column to multiply</span></span>
<span><span class='co'>#' @param col_name string name of column to multiply</span></span>
<span><span class='co'>#' @param multiply_by numeric of magnitude to multiply column by, default is 5</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @return selected dataframe column multiplied by the given number</span></span>
<span><span class='va'>select_col_multiply</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>df</span>, <span class='va'>col_name</span>, <span class='va'>multiply_by</span> <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>df</span><span class='op'>[</span><span class='va'>col_name</span><span class='op'>]</span> <span class='op'>*</span> <span class='va'>multiply_by</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='fu'>select_col_multiply</span><span class='op'>(</span><span class='va'>df</span>, col_name <span class='op'>=</span> <span class='st'>"b"</span><span class='op'>)</span></span>
<span><span class='fu'>select_col_multiply</span><span class='op'>(</span><span class='va'>df</span>, <span class='st'>"c"</span>, <span class='fl'>9</span><span class='op'>)</span></span></code></pre>
</div>
</div>
</section>
</div>
<h1 id="best-practice-style-for-functions">Best Practice <strong>Style</strong> for functions</h1>
<p>There are many ways that you could write a function that technically would work.
Code within a function should follow standard best practice style (see <a href="https://style.tidyverse.org/">Tidyverse Style Guide</a>).</p>
<p>However, there are some best practice guidance to follow.<br />
Key point regardless of style you choose to follow: <strong>Consistency</strong>.</p>
<p><em>Note:</em> There are packages available to help you adhere to good style:<br />
We recommend <a href="https://lintr.r-lib.org/articles/lintr.html"><code>lintr</code></a>. It doesnt edit your code directly (as some others do, e.g.<a href="https://www.tidyverse.org/blog/2017/12/styler-1.0.0/"><code>styler</code></a>) but makes a descriptive list of where it recommends style improvements.<br />
This package may not be perfect and is not a replacement for writing good code in the first place, or being critical about style in general.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='st'>"lintr"</span><span class='op'>)</span></span>
<span><span class='co'># This is the main function to check style in R scripts. Others exist too.</span></span>
<span><span class='fu'>lintr</span><span class='fu'>::</span><span class='fu'><a href='https://lintr.r-lib.org/reference/lint.html'>lint</a></span><span class='op'>(</span><span class='st'>"filename_filepath.R"</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h2 id="function-name">Function name</h2>
<ul>
<li>snake_case
<ul>
<li>Lower case, numbers and underscores only (no full stops or hyphens)</li>
<li>Words separated with <code>_</code></li>
</ul></li>
<li>Very descriptive/meaningful</li>
<li>Ideally contain a verb</li>
<li>Doesnt overwrite a commonly used/base function</li>
<li>Do not start with a number or underscore</li>
</ul>
<h2 id="lines">Lines</h2>
<p>If the lines get too long (&gt;79 characters), you can put the arguments on separate lines.<br />
Curly brackets: <code>{</code> should be the last thing on its line, <code>}</code> should be the first thing on its line.<br />
Code should be between the <code>{</code> and <code>}</code>, not on the same line.</p>
<h2 id="spacing">Spacing</h2>
<ul>
<li>Spaces around the assignment (<code>=</code>, <code>&lt;-</code>)</li>
<li>Space after comma in list of arguments</li>
<li>No space between function and <code>(</code></li>
<li>No space between <code>(</code> and first argument</li>
<li>No space between final argument and <code>)</code></li>
<li>Space between <code>)</code> and <code>{</code></li>
</ul>
<h2 id="indentation">Indentation</h2>
<p>Code should be indented 2 spaces (plus any further indents depending on the code).
<code>Ctrl+i</code> in RStudio manages this indentation for you.</p>
<h2 id="returns">Returns</h2>
<p>R doesnt need an explicit <code>return()</code>.
The last line (idea/phrase) of a function is automatically returned.<br />
Tidyverse style guide suggests not including the <code>return()</code>, but it has been used in some examples for clarity.</p>
<p>Consistency is key.</p>
<p>Furthermore, anything that is inside <code>print()</code> and warnings/errors will be returned to the console, but not saved as an output of the function.</p>
<h2 id="assignment-1">Assignment</h2>
<p>Use <code>=</code> inside a functions arguments (i.e.defining a default argument and specifying an argument when calling it).<br />
Use <code>&lt;-</code> as normal best-practice inside the function code.</p>
<h2 id="arguments-1">Arguments</h2>
<p>Argument names should follow similar rules to function names:</p>
<ul>
<li>Descriptive</li>
<li>snake_case</li>
<li>Consistent argument names across functions can be helpful (e.g.<code>df</code> for a dataframe argument, <code>x</code> for an integer)</li>
<li>Lower case, numbers and underscores only (no full stops or hyphens)</li>
<li>Do not start with a number or underscore</li>
</ul>
<p>If the argument requires a string, use string, rather than string.
Unless there is quote within a string: this is a quote string.</p>
<p>For general arguments, you dont have to explicitly name the most obvious arguments (e.g.<code>data</code>) but it is recommended for custom functions and especially optional arguments. It can be very helpful for clarity in complex pipelines.</p>
<h2 id="comments">Comments</h2>
<p>If using <a href="#docstrings">docstrings</a>, minimal comments should be necessary for sub-functions.<br />
Only comments explaining why things are being done should be included, instead of what is being done (same as general commenting style).<br />
If docstrings are not used, should still add general comments on the function. At least for a title, description, any parameters and what is returned.</p>
<h2 id="piping-styledplyr-advanced">Piping <code>%&gt;%</code> style/<code>dplyr</code> (Advanced)</h2>
<p>This relates to pipes (<code>%&gt;%</code>) in code within and outside of functions.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># If there is only one dplyr function, no pipes</span></span>
<span><span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>iris</span>, <span class='va'>Petal.Length</span> <span class='op'>&gt;</span> <span class='fl'>6.5</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
1          7.6         3.0          6.6         2.1 virginica
2          7.7         3.8          6.7         2.2 virginica
3          7.7         2.6          6.9         2.3 virginica
4          7.7         2.8          6.7         2.0 virginica</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># If there are pipes, only one pipe per line and it is the last thing on the line</span></span>
<span><span class='va'>iris</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Petal.Length</span> <span class='op'>&gt;</span> <span class='fl'>6.5</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>Species</span>, <span class='va'>Petal.Length</span>, <span class='va'>Petal.Width</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>    Species Petal.Length Petal.Width
1 virginica          6.6         2.1
2 virginica          6.7         2.2
3 virginica          6.9         2.3
4 virginica          6.7         2.0</code></pre>
</div>
<h2 id="quiz-2">Quiz 2</h2>
<div class="panelset">
<section id="question-1" class="panel-name panel">
<h3 class="panel-name">Question</h3>
<p>What are good function and argument names?</p>
<ol type="A">
<li>
<code>DoctorHouse(Patient1, Patient2)</code>
</li>
<li>
<code>doctorHouse(1stpatient, 2ndpatient)</code>
</li>
<li>
<code>doctorhouse(patientone, patienttwo)</code>
</li>
<li>
<code>doctor_house(first_patient, second_patient)</code>
</li>
</ol>
</section>
<section id="see-answer-1" class="panel-name panel">
<h3 class="panel-name">See Answer</h3>
<p>What are good function and argument names?</p>
<ol type="A">
<li>
<code>DoctorHouse(Patient1, Patient2)</code>
</li>
<li>
<code>doctorHouse(1stpatient, 2ndpatient)</code>
</li>
<li>
<code>doctorhouse(patientone, patienttwo)</code>
</li>
<li>
<b><code>doctor_house(first_patient, second_patient)</code></b>
</li>
</ol>
</section>
</div>
<h1 id="docstrings">Documentation (docstrings)</h1>
<p>Even if you dont do technical <strong>Roxygen</strong> headers, you should still have correct level of comments describing what the function does: a title, description, any parameters and what is returned.<br />
However, we recommend giving any custom function the below <strong>Roxygen</strong> structure as it adds consistency, readability and can save time if you decide to package in the future.</p>
<h2 id="function-documentation-roxygen2">Function documentation: <code>roxygen2</code></h2>
<p>Standard format of headers to add to functions that automate creation of the function documentation.
In RStudio, put the cursor inside the function and either:</p>
<ul>
<li><code>Ctrl+Shift+Alt+R</code></li>
<li>On toolbar, Code  Insert Roxygen skeleton</li>
</ul>
<p>Some parts are required, some are optional.</p>
<h3 id="required">Required:</h3>
<ul>
<li>Title
<ul>
<li>Like a short description</li>
</ul></li>
<li>Description
<ul>
<li>Full sentence structure explanation of what the function does and any important contextual information</li>
</ul></li>
<li>Parameters
<ul>
<li>Should have a descriptive name</li>
<li>Include what type/class of object is needed</li>
<li>Include any default values</li>
</ul></li>
<li>Return
<ul>
<li>What is the expected output (inc type/class)</li>
</ul></li>
</ul>
<h3 id="optional">Optional:</h3>
<ul>
<li>Examples
<ul>
<li>Can add code for full, workable examples of the function to the header to help people use it</li>
</ul></li>
<li>Author
<ul>
<li>Add the authors name to the function</li>
</ul></li>
<li>Export
<ul>
<li>Allows the function to be called one the function is packaged</li>
</ul></li>
<li>Import
<ul>
<li>Any packages that need to be imported to the function to allow sub-functions to work</li>
</ul></li>
</ul>
<p>There are many other optional tags.</p>
<p><em>Note:</em> Best practice is to put sub-functions below the wrapper where it is used.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>##### Example 1 - Addition #####</span></span>
<span></span>
<span><span class='co'>#' Sums two numbers</span></span>
<span><span class='co'>#' </span></span>
<span><span class='co'>#' @description Adds two numbers together and returns the sum.</span></span>
<span><span class='co'>#' The numeric vectors need to be a multiple of each other (or the same).</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @param number_1 numeric vector</span></span>
<span><span class='co'>#' @param number_2 numeric vector</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @return integer</span></span>
<span><span class='va'>sum_two_numbers</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>number_1</span>, <span class='va'>number_2</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>number_1</span> <span class='op'>+</span> <span class='va'>number_2</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'>##### Example 2 - Temperature Conversions #####</span></span>
<span></span>
<span><span class='co'>#' Converts degrees Fahrenheit to degrees Celsius</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @description Converts degrees Fahrenheit to degrees Celsius,</span></span>
<span><span class='co'>#' can be used on single number or numeric vector</span></span>
<span><span class='co'>#' </span></span>
<span><span class='co'>#' @param temp_F numeric vector of temperature in Fahrenheit</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @return numeric vector of temperature in Celsius</span></span>
<span><span class='va'>degree_F_to_C</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='op'>(</span><span class='va'>temp_F</span> <span class='op'>-</span> <span class='fl'>32</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>5</span> <span class='op'>/</span> <span class='fl'>9</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'>#' Converts degrees Fahrenheit to Kelvin</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @description Converts degrees Fahrenheit to Kelvin,</span></span>
<span><span class='co'>#' can be used on single number or numeric vector</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @param temp_F numeric vector of temperature in Fahrenheit</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @return numeric vector of temperature in Kelvin</span></span>
<span><span class='va'>degree_F_to_K</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>temp_C</span> <span class='op'>&lt;-</span> <span class='fu'>degree_F_to_C</span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span></span>
<span>  <span class='fu'>degree_C_to_K</span><span class='op'>(</span><span class='va'>temp_C</span><span class='op'>)</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='co'>#' Converts degrees Celsius to Kelvin</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @description Converts degrees Fahrenheit to Kelvin, </span></span>
<span><span class='co'>#' can be used on single number or numeric vector</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @param temp_C numeric vector of temperature in Celsius</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @return numeric vector of temperature in Kelvin</span></span>
<span><span class='va'>degree_C_to_K</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>temp_C</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>temp_C</span> <span class='op'>+</span> <span class='fl'>273.15</span></span>
<span><span class='op'>}</span></span></code></pre>
</div>
</div>
<h2 id="quiz-3">Quiz 3</h2>
<div class="panelset">
<section id="question-2" class="panel-name panel">
<h3 class="panel-name">Question</h3>
<p>What parts of Roxygen header you should ALWAYS include?</p>
<ol type="A">
<li>
Title, parameters, return
</li>
<li>
Title, example, return
</li>
<li>
Title, parameters, return, example
</li>
<li>
Description, parameters, example
</li>
</ol>
</section>
<section id="see-answer-2" class="panel-name panel">
<h3 class="panel-name">See Answer</h3>
<p>What parts of Roxygen header you should ALWAYS include?</p>
<ol type="A">
<li>
<b>Title, parameters, return</b>
</li>
<li>
Title, example, return
</li>
<li>
Title, parameters, return, example
</li>
<li>
Description, parameters, example
</li>
</ol>
</section>
</div>
<h1 id="piping">Piping <code>%&gt;%</code></h1>
<p>The pipe operator <code>%&gt;%</code> (originally found in package <code>magrittr</code>) can be used as and then to call functions sequentially. It is most commonly found connecting <code>dplyr</code> functions together.</p>
<p>This replaces the need to save out intermediate results or nest functions.</p>
<p>These all do the same thing:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># Make random vector</span></span>
<span><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='fl'>100</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># Intermediate saving - Should be avoided as much as possible</span></span>
<span><span class='va'>out</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/sd.html'>sd</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span></span>
<span><span class='va'>out</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>out</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>out</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 0.5446485</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># Nesting - Can get complicated when there are multiple arguments and brackets</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/sd.html'>sd</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 0.5446485</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># Piping - Best Practice</span></span>
<span><span class='va'>x</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/stats/sd.html'>sd</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 0.5446485</code></pre>
</div>
<p>As mentioned in a previous section, the order of arguments for <code>dplyr</code> piping is quite important. Data should be the first.</p>
<p>When the functions are called in a pipe, it is assumed that the data from the previous level of the pipe is the default first argument, so it doesnt need to be specified in each function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># Using a pre-loaded example dataset called iris</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>iris</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>select_species_petal_width</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>data</span>, <span class='va'>species_interest</span>, <span class='va'>petal_width</span><span class='op'>)</span> <span class='op'>{</span></span>
<span></span>
<span>  <span class='va'>data</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>    <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Species</span> <span class='op'>==</span> <span class='va'>species_interest</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>    <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Petal.Width</span> <span class='op'>&lt;</span> <span class='va'>petal_width</span><span class='op'>)</span></span>
<span>  <span class='co'># These two filters do not have to be on separate lines </span></span>
<span>    <span class='co'># but here they are split to demonstrate multiple pipes</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'>select_species_petal_width</span><span class='op'>(</span><span class='va'>iris</span>, <span class='st'>"versicolor"</span>, <span class='fl'>1.5</span><span class='op'>)</span>, <span class='fl'>10</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>   Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
1           7.0         3.2          4.7         1.4 versicolor
2           5.5         2.3          4.0         1.3 versicolor
3           5.7         2.8          4.5         1.3 versicolor
4           4.9         2.4          3.3         1.0 versicolor
5           6.6         2.9          4.6         1.3 versicolor
6           5.2         2.7          3.9         1.4 versicolor
7           5.0         2.0          3.5         1.0 versicolor
8           6.0         2.2          4.0         1.0 versicolor
9           6.1         2.9          4.7         1.4 versicolor
10          5.6         2.9          3.6         1.3 versicolor</code></pre>
</div>
<p>You can combine custom functions with existing functions, but you must be aware of the data argument. You may need to explicitly define that the data is to be used, using: <code>.</code>, followed by a comma to separate it from the next argument.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>iris</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>select_species_petal_width</span><span class='op'>(</span><span class='st'>"versicolor"</span>, <span class='fl'>1.5</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>sepal_width_to_length <span class='op'>=</span> <span class='va'>Sepal.Width</span> <span class='op'>/</span> <span class='va'>Sepal.Length</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>utils</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width    Species
1          7.0         3.2          4.7         1.4 versicolor
2          5.5         2.3          4.0         1.3 versicolor
3          5.7         2.8          4.5         1.3 versicolor
4          4.9         2.4          3.3         1.0 versicolor
5          6.6         2.9          4.6         1.3 versicolor
6          5.2         2.7          3.9         1.4 versicolor
  sepal_width_to_length
1             0.4571429
2             0.4181818
3             0.4912281
4             0.4897959
5             0.4393939
6             0.5192308</code></pre>
</div>
<h1 id="warnings-and-errors">Warnings and Errors</h1>
<p>It can often be useful to add warnings and errors into your functions to help usability. Combine conditionals (<code>if</code>, <code>else</code>, <code>ifelse</code> or <code>dplyr::case_when</code> e.t.c.) with warnings/errors to only show in certain cases.</p>
<p>Using <code>paste</code> (or <code>paste0</code>) allows crafting of bespoke warning/error messages, such as what case you are testing.</p>
<h2 id="warnings">Warnings</h2>
<p>Doesnt stop the code from running, but prints the warning to the console.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>degree_F_to_C</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='kw'>if</span> <span class='op'>(</span><span class='va'>temp_F</span> <span class='op'>&lt;</span> <span class='op'>-</span><span class='fl'>460</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>    <span class='kw'><a href='https://rdrr.io/r/base/warning.html'>warning</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"Provided temperature ("</span>,</span>
<span>                  <span class='va'>temp_F</span>,</span>
<span>                  <span class='st'>") is below absolute zero and thus, is impossible."</span><span class='op'>)</span><span class='op'>)</span></span>
<span>  <span class='op'>}</span></span>
<span>  <span class='op'>(</span><span class='va'>temp_F</span> <span class='op'>-</span> <span class='fl'>32</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>5</span> <span class='op'>/</span> <span class='fl'>9</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='fu'>degree_F_to_C</span><span class='op'>(</span><span class='op'>-</span><span class='fl'>666</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] -387.7778</code></pre>
</div>
<h2 id="errors">Errors</h2>
<p>Will stop the code running at that point and print the error to the console.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>degree_F_to_C</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span> <span class='op'>!=</span> <span class='st'>"numeric"</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>    <span class='kw'><a href='https://rdrr.io/r/base/stop.html'>stop</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>"Provided temperature in fahrenheit is not numeric. It is a"</span>,</span>
<span>               <span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>temp_F</span><span class='op'>)</span>, </span>
<span>               <span class='st'>"object."</span><span class='op'>)</span><span class='op'>)</span></span>
<span>  <span class='op'>}</span></span>
<span>  <span class='op'>(</span><span class='va'>temp_F</span> <span class='op'>-</span> <span class='fl'>32</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>5</span> <span class='op'>/</span> <span class='fl'>9</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='fu'>degree_F_to_C</span><span class='op'>(</span><span class='st'>"200"</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>Error in degree_F_to_C(&quot;200&quot;): Provided temperature in fahrenheit is not numeric. It is a character object.</code></pre>
</div>
<h2 id="quiz-3-1">Quiz 3</h2>
<div class="panelset">
<section id="question-3" class="panel-name panel">
<h3 class="panel-name">Question</h3>
<p>What are the correct functions to create a warning and an error? (select 2 answers)</p>
<ol type="A">
<li>
<code>error()</code>
</li>
<li>
<code>stop()</code>
</li>
<li>
<code>warnings()</code>
</li>
<li>
<code>SOMETHING_IS_VERY_WRONG()</code>
</li>
<li>
<code>halt()</code>
</li>
<li>
<code>warning()</code>
</li>
</ol>
</section>
<section id="see-answer-3" class="panel-name panel">
<h3 class="panel-name">See Answer</h3>
<p>What are the correct functions to create a warning and an error? (select 2 answers)</p>
<ol type="A">
<li>
<code>error()</code>
</li>
<li>
<b><code>stop()</code></b>
</li>
<li>
<code>warnings()</code>
</li>
<li>
<code>SOMETHING_IS_VERY_WRONG()</code>
</li>
<li>
<code>halt()</code>
</li>
<li>
<b><code>warning()</code></b>
</li>
</ol>
</section>
</div>
<h2 id="function-exercises-cd">Function exercises cd</h2>
<div class="panelset">
<section id="exercises-1" class="panel-name panel">
<h3 class="panel-name">Exercises</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>##### Exercise 5 -</span></span>
<span></span>
<span><span class='co'># Create a function that will add a new column to existing data frame by</span></span>
<span><span class='co'># multiplying another column of that data frame by 3. Default name for the new</span></span>
<span><span class='co'># column should be "multiplied".</span></span>
<span></span>
<span></span>
<span><span class='co'>##### Exercise 6 -</span></span>
<span></span>
<span><span class='co'># Create a function that will compute average speed for each car brand in the</span></span>
<span><span class='co'># data frame based on distance driven and time it took. You can assume that</span></span>
<span><span class='co'># column names will be always the same for this dataset.</span></span>
<span></span>
<span><span class='va'>cars</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span></span>
<span>  brand <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Audi"</span>, <span class='st'>"BMW"</span>, <span class='st'>"Toyota"</span><span class='op'>)</span>,</span>
<span>  distance <span class='op'>=</span> <span class='fl'>4</span><span class='op'>:</span><span class='fl'>6</span>, <span class='co'># in miles</span></span>
<span>  travel_time <span class='op'>=</span> <span class='fl'>7</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span> <span class='co'># in hours</span></span>
<span></span>
<span><span class='co'># Hint: speed equals distance over time</span></span>
<span></span>
<span><span class='co'># EXTRA: Create a function that will tell which car is the fastest?</span></span>
<span></span>
<span><span class='co'># Try adding a warning and an error to your functions</span></span></code></pre>
</div>
</div>
</section>
<section id="example-solutions-1" class="panel-name panel">
<h3 class="panel-name">Example solutions</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#' Add new column to dataframe which is 3x multiplication of an existing column</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @description Adds a new column to existing data frame by multiplying another</span></span>
<span><span class='co'>#' column of that data frame by 3.</span></span>
<span><span class='co'>#' Default name for the new column should be "multiplied".</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @param df dataframe with at least one numeric column to be multiplied</span></span>
<span><span class='co'>#' @param col_name string name of numeric column to be multiplied</span></span>
<span><span class='co'>#' @param new_col_name string name of new column, default is "multiplied"</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @return dataframe with extra column</span></span>
<span><span class='va'>new_col_mulitplied</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>df</span>, <span class='va'>col_name</span>, <span class='va'>new_col_name</span> <span class='op'>=</span> <span class='st'>"multiplied"</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>df</span><span class='op'>[</span><span class='va'>new_col_name</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>df</span><span class='op'>[</span><span class='va'>col_name</span><span class='op'>]</span> <span class='op'>*</span> <span class='fl'>3</span></span>
<span>  <span class='va'>df</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='fu'>new_col_mulitplied</span><span class='op'>(</span><span class='va'>df</span>, col_name <span class='op'>=</span> <span class='st'>"b"</span><span class='op'>)</span></span>
<span><span class='fu'>new_col_mulitplied</span><span class='op'>(</span><span class='va'>df</span>, col_name <span class='op'>=</span> <span class='st'>"a"</span>, <span class='st'>"any_colname"</span><span class='op'>)</span></span>
<span></span>
<span></span>
<span><span class='co'>##### Extra - Answer 6 -----</span></span>
<span></span>
<span><span class='va'>cars</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span></span>
<span>  brand <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Audi"</span>, <span class='st'>"BMW"</span>, <span class='st'>"Toyota"</span><span class='op'>)</span>,</span>
<span>  distance <span class='op'>=</span> <span class='fl'>4</span><span class='op'>:</span><span class='fl'>6</span>, <span class='co'># in miles</span></span>
<span>  travel_time <span class='op'>=</span> <span class='fl'>7</span><span class='op'>:</span><span class='fl'>9</span><span class='op'>)</span> <span class='co'># in hours</span></span>
<span></span>
<span><span class='co'>#' Calculate car speed</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @description Calculates speed of car from distance and travel time</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @param df dataframe of cars with at least columns of distance and travel_time</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @return dataframe with new column for speed</span></span>
<span><span class='va'>car_speed</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>df</span><span class='op'>$</span><span class='va'>speed</span> <span class='op'>&lt;-</span> <span class='va'>df</span><span class='op'>$</span><span class='va'>distance</span> <span class='op'>/</span> <span class='va'>df</span><span class='op'>$</span><span class='va'>travel_time</span></span>
<span>  <span class='va'>df</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='fu'>car_speed</span><span class='op'>(</span><span class='va'>cars</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># EXTRA</span></span>
<span></span>
<span><span class='co'>#' Find the name of the fastest car</span></span>
<span><span class='co'>#' </span></span>
<span><span class='co'>#' @description Using variables of distance and travel_time, speed is calculated</span></span>
<span><span class='co'>#' and car brand name of the fastest speed is returned.</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @param df dataframe with columns called distance, travel_time and brand</span></span>
<span><span class='co'>#'</span></span>
<span><span class='co'>#' @return name of fastest car as a string</span></span>
<span><span class='co'>#' @export</span></span>
<span><span class='va'>find_fastest_car</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'>car_speed</span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span></span>
<span>  <span class='va'>df</span><span class='op'>$</span><span class='va'>brand</span><span class='op'>[</span><span class='va'>df</span><span class='op'>$</span><span class='va'>speed</span> <span class='op'>==</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='va'>df</span><span class='op'>$</span><span class='va'>speed</span><span class='op'>)</span><span class='op'>]</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='fu'>find_fastest_car</span><span class='op'>(</span><span class='va'>cars</span><span class='op'>)</span></span></code></pre>
</div>
</div>
</section>
</div>
<h1 id="additional-resources">Additional resources</h1>
<p>For more information see:</p>
<ul>
<li><a href="https://rapid-ons.github.io/training/advanced_functions.html">Advanced functions</a> - next tutorial</li>
<li><a href="https://learninghub.ons.gov.uk/course/view.php?id=635">R Control Flow, Loops and Functions</a> - course on LearningHub</li>
<li><a href="https://learninghub.ons.gov.uk/course/view.php?id=574">Modular programming in R and Python</a> - course on LearningHub</li>
</ul>
<p>Note that LearningHub resources are only available for colleagues from ONS and other government departments.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<div class="distill-site-nav distill-site-footer">
<p> Crown Copyright 2023</p>
</div>
<!--/radix_placeholder_navigation_after_body-->


</body>

</html>
